type: custom:vertical-stack-in-card
cards:
  - type: custom:stack-in-card
    mode: horizontal
    keep:
      background: true
      border-width: true
      border_radius: true
      box_shadow: true
    card_mod:
      style: |
        ha-card {
          margin-bottom: -20px;
          border-radius: 5px !important;
          border: 4px solid var(--card-background-color) !important;
          {{ 'background:   linear-gradient(90deg, rgb(120,200,120,0.4) 30%, transparent 150%);'
          if states('binary_sensor.mot_valid') == 'on' and states('binary_sensor.taxed') == 'on'
          else 'background: linear-gradient(45deg, rgb(255,130,100,0.5) 30%, transparent 150%);' }}
        }
    cards:
      - type: custom:button-card
        name: REG_PLATE
        styles:
          card:
            - background: >-
                var(--amber-color)  linear-gradient( to right, rgba(255, 255,
                255, 0.2) 17%, rgba(255, 255, 255, 0.3) 52%, rgba(255, 255, 255,
                0.1) 100%);
            - padding: 0px 15px
            - width: 100%
            - margin: 10px 0px 10px 15px
            - box-shadow: 1px 1px 3px rgb(0,0,0,0.2) !important
            - border-radius: 5px
            - border-width: 0px
            - animation: shine 2s 1s;
          name:
            - font-family: uknumberplate
            - font-size: 2em
            - color: var(--black-color)
      - type: custom:button-card
        name: Adam
        label: Ford Ranger
        show_label: true
        styles:
          card:
            - height: 100%
            - padding-right: 20px
            - margin: 0px
            - border-radius: 0
            - border-width: 0
            - background: none
            - box-shadow: none
          name:
            - width: 100%
            - text-align: right
            - font-weight: 500
          label:
            - width: 100%
            - text-align: right
            - font-size: 0.8em
            - padding: 2px
  - type: entities
    card_mod:
      style: |
        ha-card {
          background: none;
        }
    entities:
      - type: section
        label: MOT
      - type: custom:multiple-entity-row
        entity: sensor.placeholder
        icon: mdi:triangle-outline
        name: MOT Status
        tap_action:
          action: none
        show_state: false
        entities:
          - entity: sensor.mot_status
            name: false
            styles:
              text-transform: lowercase
              font-variant: small-caps
          - entity: binary_sensor.mot_valid
            icon: mdi:check-bold
            name: false
            hide_if: 'off'
          - entity: binary_sensor.mot_valid
            icon: mdi:alert
            name: false
            hide_if: 'on'
        card_mod:
          style: |
            hui-generic-entity-row:
              $: ''
              .: |
                div.entity:nth-child(1) state-badge {}
                div.entity:nth-child(2) state-badge {
                  {{ 'color: var(--green-color);' if is_state('binary_sensor.mot_valid','on') else 'color: var(--red-color);' }}
                }
      - entity: sensor.mot_expiry_date
        name: Expiry
        format: relative
        type: custom:multiple-entity-row
        show_state: false
        entities:
          - entity: sensor.mot_expiry_date
            format: relative
            name: false
            styles:
              font-size: 0.9em
              white-space: nowrap
          - entity: sensor.mot_expiry_date
            format: date
            name: false
            styles:
              margin-left: 20px
              white-space: nowrap
      - type: section
        label: Tax
      - type: custom:multiple-entity-row
        entity: sensor.placeholder
        icon: mdi:decagram-outline
        name: Tax Status
        tap_action:
          action: none
        show_state: false
        entities:
          - entity: sensor.tax_status
            name: false
            styles:
              text-transform: lowercase
              font-variant: small-caps
          - entity: binary_sensor.taxed
            icon: mdi:check-bold
            name: false
            hide_if: 'off'
          - entity: binary_sensor.taxed
            icon: mdi:alert
            name: false
            hide_if: 'on'
        card_mod:
          style: |
            hui-generic-entity-row:
              $: ''
              .: |
                div.entity:nth-child(1) state-badge {}
                div.entity:nth-child(2) state-badge {
                  {{ 'color: var(--green-color);' if is_state('binary_sensor.taxed','on') else 'color: var(--red-color);' }}
                }
      - entity: sensor.tax_due_date
        name: Due
        format: relative
        type: custom:multiple-entity-row
        show_state: false
        entities:
          - entity: sensor.tax_due_date
            format: relative
            name: false
            styles:
              font-size: 0.9em
              white-space: nowrap
          - entity: sensor.tax_due_date
            format: date
            name: false
            styles:
              margin-left: 20px
              white-space: nowrap
